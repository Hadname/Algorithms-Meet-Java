# 這故事要從那個星期四說起
## 3/11 星期三
我們這學期剛修了演算法，教授要求我們寫演算法作業，而作業的繳交是這樣子的：每個人都有一個sftp上的帳號密碼，把檔案丟到伺服器上，不同用戶間有不同權限，用戶無法看到其他用戶上傳的內容，伺服器會在早上六點和晚上六點做評分，並按照運行時間做評分。

## 3/12 星期四晚上
星期四，我們資工系的同學們去逛一中街，突然有人說應數系的同學排到第一名

**幹**！**我整個人就不爽了**，**草你媽應數系**，整天在那邊蹭資工的課，還要搶資工所的名額，在資工系有人稱他們為「大學四年不分系」

所以我**勵志要讓應數系**通通下去

## 3/13 星期五凌晨
做法是這樣的，我必需先了解伺服器內部構造，因此我有一個 getList() 函數，這個函數可以取得某個資料夾內的檔案，如果遞迴使用，效果會很驚人，我當初只是想抓個運行程式底下的三層資料夾，但因為linux還會回傳「../」一個不小心就把助教電腦資料夾給抓完了，那天抓了20多分鐘還沒抓完(因為我的程式被呼叫了10次)，回傳了 161 MB，Atom打開那檔案直接死機，眼看我的伺服器快掛了，我也趕快把我的伺服器關掉，讓程式因錯誤而停下

那個要怎麼把抓到的數據傳回來呢？

用的就是 HTTP 的 GET 方法，利用一支類似爬蟲的函數 httpRequest() 造訪我預先架好的網頁，這支函數造訪時把取得的資料以 GET() 方法傳回來，其中要注意幾點
+ 要記得 URLEncode()
+ 一次傳1000字左右就好，傳7000多會太長(考慮還要encode)

> #### 傳送需要時間，傳送太久會 TimeOut

因此我用花了將近一小時把這些神祕的函數放在另一個 Thread 裡面運行

那一天抓完了助教伺服器的結構好戲才正要開始

> Thread -> getList() (遞迴) -> sendFileList() -> send() -> httpRequest()

---

接著只要從我抓回來的 filelist 裡面看一下，要抓什麼就抓什麼，但這支抓檔案的函式我重寫很多次，要不是忘記換行，要不是就傳不回中文字，不過我最後還是完成的不錯，因此把這幾支函式留著給各位參考參考

> Thread -> getFileByPath() -> send() -> httpRequest()

## 結論
+ 伺服器根目錄 /home/alg2020/hw_upload/

+ 改分方式
    > 每天上下午 6 點，從 /home/alg2020/hw_upload/ 複製檔案到 /home/hw_compiler，並在頂部加入package
    >
    > 利用 home/HW01.java 去呼叫，測 10 次取平均
    >
    > 將秒數 追加寫入 rank.txt
    >
    > 全部批改結束後排序 rank.txt


+ 答案最大值 100 最小值 1

+ 因為測資太小，所以排名其實沒有意義，我開執行緒去抓東西每次都變第一，我有次直接 return 答案，還比別人慢

+ 另開一條執行緒可以做很多壞壞的事不會 TimeOut

+ 有一個智障研究生傳了一個叫 .java 的檔案上去，我用他的帳密把那個檔案內容改寫成什麼低能兒什麼檔名都不會打的，後來莫名其妙他的那個檔案就不見了，可能他自己刪掉或被助教看到

+ 那個應數仔後來不知道怎樣了，反正第二次作業我們資工系還是讓他下去了

+ 原本要丟個檔案到伺服器端根目錄(那邊一邊是沒有寫入權限的)，但太招搖了，所以就算了

## 那個可以操控伺服器的人
![伺服器之子](src/伺服器之子.png)
